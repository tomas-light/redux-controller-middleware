{"version":3,"file":"AppAction.js","sourceRoot":"","sources":["../../../redux-controller-middleware/src/actions/AppAction.ts"],"names":[],"mappings":";;;AAIA,MAAa,SAAS;IACpB,IAAI,CAAM;IACV,OAAO,CAAU;IAER,OAAO,CAAsC;IAEtD,eAAe,CAAU;IAEzB,SAAS,CAAa;IAKtB,YAAY,IAAY,EAAE,OAAiB;QACzC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,OAAO,GAAG,OAAkB,CAAC;QAClC,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAClB,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;IAC/B,CAAC;IAED,MAAM,CAAC,cAAc,CAAU,SAA+C,EAAE,GAAG,OAA0B;QAC3G,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,CAAC;QACnC,OAAO,SAA4B,CAAC;IACtC,CAAC;IAED,MAAM,CAAC,IAAI,CAAU,SAA+C;QACjE,SAAwC,CAAC,eAAe,GAAG,IAAI,CAAC;IACnE,CAAC;IAED,MAAM,CAAC,UAAU,CAAU,SAA+C;QACxE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC;YACtC,OAAO,EAAE,CAAC;QACZ,CAAC;QAED,OAAO,SAAS,CAAC,OAAO,CAAC;IAC3B,CAAC;IAED,cAAc,CAAC,GAAG,OAA4C;QAC5D,SAAS,CAAC,cAAc,CAAC,IAAI,EAAE,GAAG,OAAO,CAAC,CAAC;QAC3C,OAAO,IAAkC,CAAC;IAC5C,CAAC;IAED,IAAI;QACF,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACvB,CAAC;IAED,aAAa;QACX,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAiC,CAAC;QAC/D,MAAM,WAAW,GAAG,EAAqB,CAAC;QAE1C,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;YACnB,gBAAgB;YAChB,IAAI,GAAG,KAAK,eAAe,EAAE,CAAC;gBAC5B,OAAO;YACT,CAAC;YACD,IAAI,GAAG,KAAK,SAAS,EAAE,CAAC;gBACtB,WAAW,CAAC,GAAU,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;gBACpC,OAAO;YACT,CAAC;YACD,IAAI,GAAG,KAAK,iBAAiB,EAAE,CAAC;gBAC9B,WAAW,CAAC,GAAU,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;gBACpC,OAAO;YACT,CAAC;YACD,WAAW,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;QAC/B,CAAC,CAAC,CAAC;QAEH,WAAW,CAAC,cAAc,GAAG,UAAU,GAAG,OAA4C;YACpF,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,EAAE,GAAG,OAAO,CAAC,CAAC;QACpD,CAAC,CAAC;QACF,WAAW,CAAC,IAAI,GAAG;YACjB,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACvB,CAAC,CAAC;QACF,WAAW,CAAC,UAAU,GAAG;YACvB,OAAO,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACpC,CAAC,CAAC;QAEF,OAAO,WAAW,CAAC;IACrB,CAAC;CACF;AA9ED,8BA8EC","sourcesContent":["import { Container } from 'cheap-di';\nimport { Action, ActionFactory, ActionMaybeWithContainer } from '../types/index.js';\nimport { Writable } from '../types/Writable.js';\n\nexport class AppAction<Payload = undefined> implements ActionMaybeWithContainer<Payload> {\n  type: any;\n  payload: Payload;\n\n  readonly actions: (ActionFactory | Action<unknown>)[];\n\n  stopPropagation: boolean;\n\n  container?: Container;\n\n  // implementation of UnknownAction\n  [extraProps: string]: unknown;\n\n  constructor(type: string, payload?: Payload) {\n    this.type = type;\n    this.payload = payload as Payload;\n    this.actions = [];\n    this.stopPropagation = false;\n  }\n\n  static addNextActions<Payload>(appAction: Action<Payload> | AppAction<Payload>, ...actions: Action['actions']) {\n    appAction.actions.push(...actions);\n    return appAction as Action<Payload>;\n  }\n\n  static stop<Payload>(appAction: Action<Payload> | AppAction<Payload>): void {\n    (appAction as Writable<typeof appAction>).stopPropagation = true;\n  }\n\n  static getActions<Payload>(appAction: Action<Payload> | AppAction<Payload>): Action['actions'] {\n    if (!Array.isArray(appAction.actions)) {\n      return [];\n    }\n\n    return appAction.actions;\n  }\n\n  addNextActions(...actions: (ActionFactory | Action<unknown>)[]) {\n    AppAction.addNextActions(this, ...actions);\n    return this as unknown as Action<Payload>;\n  }\n\n  stop(): void {\n    AppAction.stop(this);\n  }\n\n  toPlainObject(): Action<Payload> {\n    const keys = Object.keys(this) as (keyof AppAction<Payload>)[];\n    const plainObject = {} as Action<Payload>;\n\n    keys.forEach((key) => {\n      // skip property\n      if (key === 'toPlainObject') {\n        return;\n      }\n      if (key === 'actions') {\n        plainObject[key as any] = this[key];\n        return;\n      }\n      if (key === 'stopPropagation') {\n        plainObject[key as any] = this[key];\n        return;\n      }\n      plainObject[key] = this[key];\n    });\n\n    plainObject.addNextActions = function (...actions: (ActionFactory | Action<unknown>)[]) {\n      return AppAction.addNextActions(this, ...actions);\n    };\n    plainObject.stop = function () {\n      AppAction.stop(this);\n    };\n    plainObject.getActions = function () {\n      return AppAction.getActions(this);\n    };\n\n    return plainObject;\n  }\n}\n"]}